$(document).ready(function(){
    $(".signup-country").append(`
    <option value="">Select Country</option>
                                <option value="Afghanistan">Afghanistan</option>
                                <option value="Åland Islands">Åland Islands</option>
                                <option value="Albania">Albania</option>
                                <option value="Algeria">Algeria</option>
                                <option value="American Samoa">American Samoa</option>
                                <option value="Andorra">Andorra</option>
                                <option value="Angola">Angola</option>
                                <option value="Anguilla">Anguilla</option>
                                <option value="Antarctica">Antarctica</option>
                                <option value="Antigua and Barbuda">Antigua and Barbuda</option>
                                <option value="Argentina">Argentina</option>
                                <option value="Armenia">Armenia</option>
                                <option value="Aruba">Aruba</option>
                                <option value="Australia">Australia</option>
                                <option value="Austria">Austria</option>
                                <option value="Azerbaijan">Azerbaijan</option>
                                <option value="Bahamas">Bahamas</option>
                                <option value="Bahrain">Bahrain</option>
                                <option value="Bangladesh">Bangladesh</option>
                                <option value="Barbados">Barbados</option>
                                <option value="Belarus">Belarus</option>
                                <option value="Belgium">Belgium</option>
                                <option value="Belize">Belize</option>
                                <option value="Benin">Benin</option>
                                <option value="Bermuda">Bermuda</option>
                                <option value="Bhutan">Bhutan</option>
                                <option value="Bolivia">Bolivia</option>
                                <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
                                <option value="Botswana">Botswana</option>
                                <option value="Bouvet Island">Bouvet Island</option>
                                <option value="Brazil">Brazil</option>
                                <option value="British Indian Ocean Territory">British Indian Ocean Territory</option>
                                <option value="Brunei Darussalam">Brunei Darussalam</option>
                                <option value="Bulgaria">Bulgaria</option>
                                <option value="Burkina Faso">Burkina Faso</option>
                                <option value="Burundi">Burundi</option>
                                <option value="Cambodia">Cambodia</option>
                                <option value="Cameroon">Cameroon</option>
                                <option value="Canada">Canada</option>
                                <option value="Cape Verde">Cape Verde</option>
                                <option value="Cayman Islands">Cayman Islands</option>
                                <option value="Central African Republic">Central African Republic</option>
                                <option value="Chad">Chad</option>
                                <option value="Chile">Chile</option>
                                <option value="China">China</option>
                                <option value="Christmas Island">Christmas Island</option>
                                <option value="Cocos (Keeling) Islands">Cocos (Keeling) Islands</option>
                                <option value="Colombia">Colombia</option>
                                <option value="Comoros">Comoros</option>
                                <option value="Congo">Congo</option>
                                <option value="Congo, The Democratic Republic of The">Congo, The Democratic Republic of The</option>
                                <option value="Cook Islands">Cook Islands</option>
                                <option value="Costa Rica">Costa Rica</option>
                                <option value="Cote D'ivoire">Cote D'ivoire</option>
                                <option value="Croatia">Croatia</option>
                                <option value="Cuba">Cuba</option>
                                <option value="Cyprus">Cyprus</option>
                                <option value="Czech Republic">Czech Republic</option>
                                <option value="Denmark">Denmark</option>
                                <option value="Djibouti">Djibouti</option>
                                <option value="Dominica">Dominica</option>
                                <option value="Dominican Republic">Dominican Republic</option>
                                <option value="Ecuador">Ecuador</option>
                                <option value="Egypt">Egypt</option>
                                <option value="El Salvador">El Salvador</option>
                                <option value="Equatorial Guinea">Equatorial Guinea</option>
                                <option value="Eritrea">Eritrea</option>
                                <option value="Estonia">Estonia</option>
                                <option value="Ethiopia">Ethiopia</option>
                                <option value="Falkland Islands (Malvinas)">Falkland Islands (Malvinas)</option>
                                <option value="Faroe Islands">Faroe Islands</option>
                                <option value="Fiji">Fiji</option>
                                <option value="Finland">Finland</option>
                                <option value="France">France</option>
                                <option value="French Guiana">French Guiana</option>
                                <option value="French Polynesia">French Polynesia</option>
                                <option value="French Southern Territories">French Southern Territories</option>
                                <option value="Gabon">Gabon</option>
                                <option value="Gambia">Gambia</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Germany">Germany</option>
                                <option value="Ghana">Ghana</option>
                                <option value="Gibraltar">Gibraltar</option>
                                <option value="Greece">Greece</option>
                                <option value="Greenland">Greenland</option>
                                <option value="Grenada">Grenada</option>
                                <option value="Guadeloupe">Guadeloupe</option>
                                <option value="Guam">Guam</option>
                                <option value="Guatemala">Guatemala</option>
                                <option value="Guernsey">Guernsey</option>
                                <option value="Guinea">Guinea</option>
                                <option value="Guinea-bissau">Guinea-bissau</option>
                                <option value="Guyana">Guyana</option>
                                <option value="Haiti">Haiti</option>
                                <option value="Heard Island and Mcdonald Islands">Heard Island and Mcdonald Islands</option>
                                <option value="Holy See (Vatican City State)">Holy See (Vatican City State)</option>
                                <option value="Honduras">Honduras</option>
                                <option value="Hong Kong">Hong Kong</option>
                                <option value="Hungary">Hungary</option>
                                <option value="Iceland">Iceland</option>
                                <option value="India">India</option>
                                <option value="Indonesia">Indonesia</option>
                                <option value="Iran, Islamic Republic of">Iran, Islamic Republic of</option>
                                <option value="Iraq">Iraq</option>
                                <option value="Ireland">Ireland</option>
                                <option value="Isle of Man">Isle of Man</option>
                                <option value="Israel">Israel</option>
                                <option value="Italy">Italy</option>
                                <option value="Jamaica">Jamaica</option>
                                <option value="Japan">Japan</option>
                                <option value="Jersey">Jersey</option>
                                <option value="Jordan">Jordan</option>
                                <option value="Kazakhstan">Kazakhstan</option>
                                <option value="Kenya">Kenya</option>
                                <option value="Kiribati">Kiribati</option>
                                <option value="Korea, Democratic People's Republic of">Korea, Democratic People's Republic of</option>
                                <option value="Korea, Republic of">Korea, Republic of</option>
                                <option value="Kuwait">Kuwait</option>
                                <option value="Kyrgyzstan">Kyrgyzstan</option>
                                <option value="Lao People's Democratic Republic">Lao People's Democratic Republic</option>
                                <option value="Latvia">Latvia</option>
                                <option value="Lebanon">Lebanon</option>
                                <option value="Lesotho">Lesotho</option>
                                <option value="Liberia">Liberia</option>
                                <option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option>
                                <option value="Liechtenstein">Liechtenstein</option>
                                <option value="Lithuania">Lithuania</option>
                                <option value="Luxembourg">Luxembourg</option>
                                <option value="Macao">Macao</option>
                                <option value="Macedonia, The Former Yugoslav Republic of">Macedonia, The Former Yugoslav Republic of</option>
                                <option value="Madagascar">Madagascar</option>
                                <option value="Malawi">Malawi</option>
                                <option value="Malaysia">Malaysia</option>
                                <option value="Maldives">Maldives</option>
                                <option value="Mali">Mali</option>
                                <option value="Malta">Malta</option>
                                <option value="Marshall Islands">Marshall Islands</option>
                                <option value="Martinique">Martinique</option>
                                <option value="Mauritania">Mauritania</option>
                                <option value="Mauritius">Mauritius</option>
                                <option value="Mayotte">Mayotte</option>
                                <option value="Mexico">Mexico</option>
                                <option value="Micronesia, Federated States of">Micronesia, Federated States of</option>
                                <option value="Moldova, Republic of">Moldova, Republic of</option>
                                <option value="Monaco">Monaco</option>
                                <option value="Mongolia">Mongolia</option>
                                <option value="Montenegro">Montenegro</option>
                                <option value="Montserrat">Montserrat</option>
                                <option value="Morocco">Morocco</option>
                                <option value="Mozambique">Mozambique</option>
                                <option value="Myanmar">Myanmar</option>
                                <option value="Namibia">Namibia</option>
                                <option value="Nauru">Nauru</option>
                                <option value="Nepal">Nepal</option>
                                <option value="Netherlands">Netherlands</option>
                                <option value="Netherlands Antilles">Netherlands Antilles</option>
                                <option value="New Caledonia">New Caledonia</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="Nicaragua">Nicaragua</option>
                                <option value="Niger">Niger</option>
                                <option value="Nigeria">Nigeria</option>
                                <option value="Niue">Niue</option>
                                <option value="Norfolk Island">Norfolk Island</option>
                                <option value="Northern Mariana Islands">Northern Mariana Islands</option>
                                <option value="Norway">Norway</option>
                                <option value="Oman">Oman</option>
                                <option value="Pakistan">Pakistan</option>
                                <option value="Palau">Palau</option>
                                <option value="Palestinian Territory, Occupied">Palestinian Territory, Occupied</option>
                                <option value="Panama">Panama</option>
                                <option value="Papua New Guinea">Papua New Guinea</option>
                                <option value="Paraguay">Paraguay</option>
                                <option value="Peru">Peru</option>
                                <option value="Philippines">Philippines</option>
                                <option value="Pitcairn">Pitcairn</option>
                                <option value="Poland">Poland</option>
                                <option value="Portugal">Portugal</option>
                                <option value="Puerto Rico">Puerto Rico</option>
                                <option value="Qatar">Qatar</option>
                                <option value="Reunion">Reunion</option>
                                <option value="Romania">Romania</option>
                                <option value="Russian Federation">Russian Federation</option>
                                <option value="Rwanda">Rwanda</option>
                                <option value="Saint Helena">Saint Helena</option>
                                <option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
                                <option value="Saint Lucia">Saint Lucia</option>
                                <option value="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option>
                                <option value="Saint Vincent and The Grenadines">Saint Vincent and The Grenadines</option>
                                <option value="Samoa">Samoa</option>
                                <option value="San Marino">San Marino</option>
                                <option value="Sao Tome and Principe">Sao Tome and Principe</option>
                                <option value="Saudi Arabia">Saudi Arabia</option>
                                <option value="Senegal">Senegal</option>
                                <option value="Serbia">Serbia</option>
                                <option value="Seychelles">Seychelles</option>
                                <option value="Sierra Leone">Sierra Leone</option>
                                <option value="Singapore">Singapore</option>
                                <option value="Slovakia">Slovakia</option>
                                <option value="Slovenia">Slovenia</option>
                                <option value="Solomon Islands">Solomon Islands</option>
                                <option value="Somalia">Somalia</option>
                                <option value="South Africa">South Africa</option>
                                <option value="South Georgia and The South Sandwich Islands">South Georgia and The South Sandwich Islands</option>
                                <option value="Spain">Spain</option>
                                <option value="Sri Lanka">Sri Lanka</option>
                                <option value="Sudan">Sudan</option>
                                <option value="Suriname">Suriname</option>
                                <option value="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option>
                                <option value="Swaziland">Swaziland</option>
                                <option value="Sweden">Sweden</option>
                                <option value="Switzerland">Switzerland</option>
                                <option value="Syrian Arab Republic">Syrian Arab Republic</option>
                                <option value="Taiwan, Province of China">Taiwan, Province of China</option>
                                <option value="Tajikistan">Tajikistan</option>
                                <option value="Tanzania, United Republic of">Tanzania, United Republic of</option>
                                <option value="Thailand">Thailand</option>
                                <option value="Timor-leste">Timor-leste</option>
                                <option value="Togo">Togo</option>
                                <option value="Tokelau">Tokelau</option>
                                <option value="Tonga">Tonga</option>
                                <option value="Trinidad and Tobago">Trinidad and Tobago</option>
                                <option value="Tunisia">Tunisia</option>
                                <option value="Turkey">Turkey</option>
                                <option value="Turkmenistan">Turkmenistan</option>
                                <option value="Turks and Caicos Islands">Turks and Caicos Islands</option>
                                <option value="Tuvalu">Tuvalu</option>
                                <option value="Uganda">Uganda</option>
                                <option value="Ukraine">Ukraine</option>
                                <option value="United Arab Emirates">United Arab Emirates</option>
                                <option value="United Kingdom">United Kingdom</option>
                                <option value="United States">United States</option>
                                <option value="United States Minor Outlying Islands">United States Minor Outlying Islands</option>
                                <option value="Uruguay">Uruguay</option>
                                <option value="Uzbekistan">Uzbekistan</option>
                                <option value="Vanuatu">Vanuatu</option>
                                <option value="Venezuela">Venezuela</option>
                                <option value="Viet Nam">Viet Nam</option>
                                <option value="Virgin Islands, British">Virgin Islands, British</option>
                                <option value="Virgin Islands, U.S.">Virgin Islands, U.S.</option>
                                <option value="Wallis and Futuna">Wallis and Futuna</option>
                                <option value="Western Sahara">Western Sahara</option>
                                <option value="Yemen">Yemen</option>
                                <option value="Zambia">Zambia</option>
                                <option value="Zimbabwe">Zimbabwe</option>
    `)

    var url_param = new URLSearchParams(location.search);


    let is_manage = true;
    let onlyRegAPI = false;

    function dataEncrypt(data){
        var secret = "NioM123";
        var encrypted = CryptoJS.AES.encrypt(JSON.stringify(data), secret);
        return encodeURIComponent(encrypted);
    }

    function decryptData (data){
            var secret = "NioM123";
            var d = CryptoJS.AES.decrypt(data.toString(), secret).toString(CryptoJS.enc.Utf8);
            return d;
    }

    function getData(data){
            var oid = "" 
            var e = ""
            var ai = data.indexOf("a");
            var di = data.indexOf("d");
            for(let j = 1; j < data.length-1; j++){
                    if(j < ai){
                            oid = oid+data[j]
                    }else if(j > di){
                            e = e + data[j]
                    }
            }
            return {id:oid,email:e}
    }  

    if(url_param.get('ved')){
        var decrypt = decryptData (decodeURIComponent(url_param.get('ved')));
        $('.sf5').val(getData(decrypt).email);
    }
    let isTeam = false
    if(url_param.get('d')){
        var decrypt = decryptData (decodeURIComponent(url_param.get('d')));
        $('.sf5').val(getData(decrypt).email);
        $('.sf5').attr('readonly',true);
        $('.tn').hide();
        is_manage = false;
        onlyRegAPI = true;
        isTeam = true;
        localStorage.setItem('org_id_new',getData(decrypt).id);
    }


    function sendFilledForm(e,hmsg,rm,sign){
        axios({
                method: 'post',
                url: 'https://www.staging.backend.niompmo.com/account/api/promotion_mail/',
                data: {
                        subject:'Successfull Registration Confirmation with NioM PMO' ,
                        to_emails: [e],
                        body: `
                        <body>
                        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 5%;">
                                <div style="display: inline-block; border: 1px solid yellowgreen; padding: 1%; width: 70%;">
                                        <img src="https://production.backend.niompmo.com/media/profile_pics/test_File_brand-logo.png" alt="" width="auto" height="70px">
                                        <p style="color: #5161AC; text-align: leftr;  font-size: 18px; line-height: 20px;">This email is only for inform you. ${hmsg}
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;"><b>Name : </b> ${localStorage.getItem("fname_new")} ${localStorage.getItem("lname_new")}</p>
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;"><b>Email : </b> ${localStorage.getItem("email_new")}</p>
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;"><b>Username: </b> ${localStorage.getItem("uname_new")}</p>
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;"><b>Organization Name : </b>  ${is_manage ? localStorage.getItem("org_name_new"):''}</p>
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;"><b>Business Division: </b>  ${is_manage ?localStorage.getItem("business_div_new"):''}</p>
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;"><b>Address : </b>  ${localStorage.getItem("city_new")} ${localStorage.getItem("country_new")}</p>
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;"><b>Role : </b> ${is_manage ? localStorage.getItem('role_new'):''}</p>
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;"><b>No of Licenses : </b>  ${is_manage ? localStorage.getItem("lic_new"):''}</p>
                                        <p style="text-align: left; text-align-last: left; font-size: 16px;">${rm}</p>

                                </div>
                        </div>
                        <br>
                        ${sign}
                </body>
                                `,
                }
        });
}

    // Edited by Tushar Sharma starts here
    // 11th june 2021
var url_param = new URLSearchParams(location.search);
if(url_param.get("subscriber_plan")){
    $("#rUL").on("input", function(){
        if($(this).val() <= 5){
            $("#rUL-label").css("display", "none")
            $("#check").removeAttr("disabled")
        }
        else{
            $("#rUL-label").css("display", "block")
            $("#check").prop("checked", false)
            $("#check").prop("disabled", true)
            $("#signUpBtn").prop('disabled', true)
            $("#signUpBtn").css("background", "#b7b5b5")
            $("#signUpBtn").css("border", "1px solid #b7b5b5")
            if(url_param.get("subscriber_plan") === "Basic/Free"){
                $("#rUL-label").text(`Basic/Free plan has limit of 5 licenses only. Please <a id="rUL-label-link" href=""> click here </a> to upgrade and add more licenses`)
            }
            else{
                $("#rUL-label").text(`In 15 days trial, only 5 licenses are allowed. Please continue and you can upgrade it later on.`)
            }            
        }
    })
    }
    var url_param = new URLSearchParams(location.search);
    
    // Edited by Tushar Sharma ends here
    // 11th june 2021

    $("#signup-lform").submit(function(e){
        var errorCount = 0
        var otherF = 0
        if(is_manage){
            $('.sf').each(function(index){
                if($(`.sf${index+1}`).val() == ''){
                        e.preventDefault();
                        $(`.sf${index+1}`).css({'border':'1px solid red'});
                        errorCount = errorCount + 1;
                        otherF = otherF +1
                        return false;
                }
                else{
                    $(`.sf${index+1}`).css({'border':'1px solid #c9c9c9'});
                }
        });
        }else{
            $('.sft').each(function(index){
                if($(`.sft${index+1}`).val() == ''){
                        e.preventDefault();
                        $(`.sft${index+1}`).css({'border':'1px solid red'});
                        errorCount = errorCount + 1;
                        otherF = otherF +1
                        return false;
                }else{
                    $(`.sft${index+1}`).css({'border':'1px solid #c9c9c9'});
                }
            });
        }

        if($(".sf5").val() != '' && !$(".sf5").val().match(/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)){
            e.preventDefault();
            $(".sf5").css({'border':'1px solid red'});
            $('.error-msg-form').empty().text('Please, provide valid email! ');
            otherF = otherF +1
            return false;
        }

        if( $(".sf11").val() !='' && ($(".sf11").val().length < 8 || $(".sf11").val().length > 15)){
            e.preventDefault();
            errorCount = errorCount + 1;
            $(".sf11").css({'border':'1px solid red'})
            $(".error-msg-form").empty().text("Password length should be minimum 8  and maximum 15 characters");
            otherF = otherF +1
            return false;
        }else if($(".sf11").val() != '' && !$(".sf11").val().match(/[a-z]+/g)){
            e.preventDefault()
            errorCount = errorCount + 1;
            $(".sf11").find('input[name="pass1"]').css({'border':'2px solid red'})
            $(".error-msg-form").empty().text("Password should contain letters");
            otherF = otherF +1
            return false;
        }else {
            $(".error-msg-form").empty();
        }

        if( $(".sf12").val()  != '' && $(".sf11").val()  != $(".sf12").val() ){
            e.preventDefault()
            $(".sf11").css({'border':'2px solid red'})
            $(".sf12").css({'border':'2px solid red'})
            $(".error-msg-form").text(" Password doesn't match !");
            return false;
        }

        if(otherF === 0 &&  !$(`#check`).is(":checked")){
            e.preventDefault()
            errorCount === 0
            $(".error-msg-form").empty().text("Please agree to our policies");
            return false;
        }

        if(errorCount === 0){

            let valueList = {}

            if(is_manage){
                valueList = {
                    org_name_new : $(".sf1").val(),
                    business_div_new : $(".sf2").val(),
                    fname_new : $(".sf3").val(),
                    lname_new : $(".sf4").val(),
                    email_new : $(".sf5").val(),
                    lic_new : $(".sf9").val(),
                    city_new : $(".sf7").val(),
                    country_new : $(".sf8").val(),
                    uname_new : $(".sf6").val(),
                    role_new : $(".sf10").val(),
                    pass_new : $(".sf11").val(),
                    subscription_plan :url_param.get("subscriber_plan").toLocaleLowerCase()
                }
            }else{
                valueList = {
                    fname_new : $(".sf3").val(),
                    lname_new : $(".sf4").val(),
                    email_new : $(".sf5").val(),
                    city_new : $(".sf7").val(),
                    country_new : $(".sf8").val(),
                    uname_new : $(".sf6").val(),
                    pass_new : $(".sf11").val(),
                }
            }



            Object.entries(valueList).forEach(([key, value]) =>{
                localStorage.setItem(key,value);
            });
            let licArr = [];

            if(is_manage){
                for(let i = 0; i <  localStorage.getItem("lic_new"); i++){
                    if(i==0){
                            licArr.push({'email':`${localStorage.getItem("email_new")}`,'admin_name':`${localStorage.getItem("fname_new")} ${localStorage.getItem("lname_new")}`,'subscription_plan' : `${localStorage.getItem("subscription_plan")}`  });
                    }else {
                            licArr.push({'admin_name':`${localStorage.getItem("fname_new")} ${localStorage.getItem("lname_new")}`,'subscription_plan' : `${localStorage.getItem("subscription_plan")}`});
                    }
                }
    
            }

            $("#signup-lform").css({'display':"none"});
            $('#loading').css({'display':'flex'});
            $(".modal-welcome-msg").empty().text('');


            if(!onlyRegAPI){

                axios({
                    method:'post',
                    url:'https://www.staging.backend.niompmo.com/account/api/license/',
                    data:  {
                        org_data :{
                            parent_name : localStorage.getItem("org_name_new"),
                            name : `${localStorage.getItem("fname_new")} ${localStorage.getItem("lname_new")}`,
                            location : `${localStorage.getItem("city_new")} ${localStorage.getItem("country_new")}`,
                        },
                        lic_data : licArr
                        
                    }
                }).then((res) =>{
                    if(res.data.status == true){
                        localStorage.setItem("org_id_new",res.data.data.organization_id)
                        axios({
                            method:'post',
                            url:'https://www.staging.backend.niompmo.com/account/api/register/',
                            data: {
                                first_name : localStorage.getItem("fname_new"),
                                last_name : localStorage.getItem("lname_new"),
                                email : localStorage.getItem("email_new"),
                                country : localStorage.getItem("country_new"),
                                role : localStorage.getItem("role_new"),
                                organization_id : localStorage.getItem("org_id_new"),
                                password : localStorage.getItem("pass_new"),
                                username : localStorage.getItem("uname_new"),
                                is_management : is_manage,
                            }
                        }).then((sres) => {
                            if(sres.data.status == true){
                                $("#signup-lform").css({'display':"none"});
                                $('#loading').css({'display':'none'});
                                $("#success-msg").css({"display":"flex"});
                                $(".modal-welcome-msg").empty().text('Early Bird Offer');                    
                                rmsg="Kindly, login to <a href='https://www.app.niompmo.com'>NioM PMO</a>"
                                if (is_manage){
                                        rmsg = "Kindly, login to <a href='https://www.app.niompmo.com'>NioM PMO</a> and nvite your teammates."
                                        success_header = "Early bird offer"
                                }
                                sendFilledForm(
                                        e=eml,
                                        hmsg = "You have been successfully registered with our NioM PMO tool with following details :",
                                        rm= rmsg,
                                        sign=`
                                                <h3>Thanks & Regards</h3>
                                                <p>NioM PMO Team powered by Nanotech Soft-App IT Solution</p>
                                                <p><span style="font-weight: 550;">Email id </span> - support@nionpmo.com</p>
                                                <p><span style="font-weight: 550;">Calendly Link </span> - <a href="https://calendly.com/nanotechsoftapp">https://calendly.com/nanotechsoftapp</a></p>
                                                <p><span style="font-weight: 550;">Linkedin </span> - <a href="https://www.linkedin.com/company/nanotech-softapp/">https://www.linkedin.com/company/nanotech-softapp/</a></p>
                                                <p><span style="font-weight: 550;">Website </span> - <a href="https://www.nanotech-softapp.com">https://www.nanotech-softapp.com</a></p>
                                                <p><span style="font-weight: 550;">New Launch Product </span> - <a href="https://www.niompmo.com">https://www.niompmo.com</a></p>
                                        `
                                );
                                sendFilledForm(
                                        e="marketing@niompmo.com",
                                        hmsg = "An user has been succeefully registered with our NioM PMO tool with following details",
                                        rm= "",
                                        sign=""
                                );
                                Object.entries(valueList).forEach(([key, value]) =>{
                                    localStorage.removeItem(key);
                                });
                            }else{
                                onlyRegAPI = true;
                                $("#signup-lform").css({'display':"block"});
                                $('#loading').css({'display':'none'});
                                $('.error-msg-form').empty().text("Username already taken !")  
                                $(".modal-welcome-msg").empty()
                                $(".modal-welcome-msg").append(`Welcome to
                                <span style="color: rgb(81, 97, 172); font-weight: 500">N</span
                                ><span style="color: rgb(81, 97, 172); font-weight: 500">i</span
                                ><span style="color: rgb(44, 55, 141); font-weight: 500">o</span
                                ><span style="color: rgb(44, 55, 141); font-weight: 500">M</span
                                ><span style="color: rgb(242, 106, 156); font-weight: 500">P</span
                                ><span style="color: rgb(242, 106, 156); font-weight: 500">M</span
                                ><span style="color: rgb(242, 106, 156); font-weight: 500">O</span
                                >`);

                            }
                        })  
                    }else{
                        $("#signup-lform").css({'display':"block"});
                        $('#loading').css({'display':'none'});
                        $('.error-msg-form').empty().text("Email already Exists !")
                        $(".modal-welcome-msg").empty()
                        $(".modal-welcome-msg").append(`Welcome to
                        <span style="color: rgb(81, 97, 172); font-weight: 500">N</span
                        ><span style="color: rgb(81, 97, 172); font-weight: 500">i</span
                        ><span style="color: rgb(44, 55, 141); font-weight: 500">o</span
                        ><span style="color: rgb(44, 55, 141); font-weight: 500">M</span
                        ><span style="color: rgb(242, 106, 156); font-weight: 500">P</span
                        ><span style="color: rgb(242, 106, 156); font-weight: 500">M</span
                        ><span style="color: rgb(242, 106, 156); font-weight: 500">O</span
                        >`);
                    }
                })
                
            }else{
                let data = {}
                if(is_manage){
                    data ={
                        first_name : localStorage.getItem("fname_new"),
                        last_name : localStorage.getItem("lname_new"),
                        email : localStorage.getItem("email_new"),
                        country : localStorage.getItem("country_new"),
                        role : localStorage.getItem("role_new"),
                        organization_id : localStorage.getItem("org_id_new"),
                        password : localStorage.getItem("pass_new"),
                        username : localStorage.getItem("uname_new"),
                        is_management : is_manage,
                    }
                }else{
                    data ={
                        first_name : localStorage.getItem("fname_new"),
                        last_name : localStorage.getItem("lname_new"),
                        email : localStorage.getItem("email_new"),
                        country : localStorage.getItem("country_new"),
                        organization_id : localStorage.getItem("org_id_new"),
                        password : localStorage.getItem("pass_new"),
                        username : localStorage.getItem("uname_new"),
                        is_management : is_manage,
                    }
                }
                axios({
                    method:'post',
                    url:'https://www.staging.backend.niompmo.com/account/api/register/',
                    data: data
                }).then((sres) => {
                    if(sres.data.status == true){
                        $('#loading').css({'display':'none'});
                        $(".modal-welcome-msg").empty()
                        if(isTeam){
                            $("#success-msg2").css({"display":"flex"});
                        }
                        else{
                            $("#success-msg").css({"display":"flex"});
                        }
                        rmsg="Kindly, login to <a href='https://www.app.niompmo.com'>NioM PMO</a>"
                                if (is_manage){
                                        rmsg = "Kindly, login to <a href='https://www.app.niompmo.com'>NioM PMO</a> and nvite your teammates."
                                }
                        sendFilledForm(
                            e=eml,
                            hmsg = "You have been successfully registered with our NioM PMO tool with following details :",
                            rm= rmsg,
                            sign=`
                                    <h3>Thanks & Regards</h3>
                                    <p>NioM PMO Team powered by Nanotech Soft-App IT Solution</p>
                                    <p><span style="font-weight: 550;">Email id </span> - support@nionpmo.com</p>
                                    <p><span style="font-weight: 550;">Calendly Link </span> - <a href="https://calendly.com/nanotechsoftapp">https://calendly.com/nanotechsoftapp</a></p>
                                    <p><span style="font-weight: 550;">Linkedin </span> - <a href="https://www.linkedin.com/company/nanotech-softapp/">https://www.linkedin.com/company/nanotech-softapp/</a></p>
                                    <p><span style="font-weight: 550;">Website </span> - <a href="https://www.nanotech-softapp.com">https://www.nanotech-softapp.com</a></p>
                                    <p><span style="font-weight: 550;">New Launch Product </span> - <a href="https://www.niompmo.com">https://www.niompmo.com</a></p>
                            `
                    );
                    sendFilledForm(
                            e="marketing@niompmo.com",
                            hmsg = "An user has been succeefully registered with our NioM PMO tool with following details",
                            rm= "",
                            sign=""
                    );
                        Object.entries(valueList).forEach(([key, value]) =>{
                            localStorage.removeItem(key);
                        });
                    }else{
                        onlyRegAPI = true;
                        $("#signup-lform").css({'display':"block"});
                        $('#loading').css({'display':'none'});
                        $('.error-msg-form').empty().text("Username already taken !")  
                    }
                })  
            }

        }

        return false;
    });

    $(".sf1").keyup(function(){
        $(`.sf1`).css({'border':'1px solid #c9c9c9'});
    });
    $(".sf2").keyup(function(){
        $(`.sf2`).css({'border':'1px solid #c9c9c9'});
    });
    $(".sf3").keyup(function(){
        $(`.sf3`).css({'border':'1px solid #c9c9c9'});
    });
    $(".sf4").keyup(function(){
        $(`.sf4`).css({'border':'1px solid #c9c9c9'});
    });
    $(".sf5").keyup(function(){
        $(`.sf5`).css({'border':'1px solid #c9c9c9'});
        $(".error-msg-form").empty()
    });
    $(".sf6").keyup(function(){
        $(`.sf6`).css({'border':'1px solid #c9c9c9'});
    });

    if($(`#check`).is(":checked")){
        $(".error-msg-form").empty()
    }
    $(".sf7").keyup(function(){
        $(`.sf7`).css({'border':'1px solid #c9c9c9'});
    });
    $(".sf8").change(function(){
        $(`.sf8`).css({'border':'1px solid #c9c9c9'});
    });
    $(".sf9").keyup(function(){
        $(`.sf9`).css({'border':'1px solid #c9c9c9'});
    });
    $(".sf10").change(function(){
        $(`.sf10`).css({'border':'1px solid #c9c9c9'});
    });
    $(".sf11").keyup(function(){
        $(`.sf11`).css({'border':'1px solid #c9c9c9'});
        $(".error-msg-form").empty()
    });
    $(".sf12").keyup(function(){
        $(`.sf12`).css({'border':'1px solid #c9c9c9'});
        if($(".sf12").val() !== $(".sf11").val()){
            $(`.sf12`).css({'border':'1px solid red'});
            $(".error-msg-form").empty().text("Password does't match!")
        }else{
            $(".error-msg-form").empty()
            $(`.sf12`).css({'border':'1px solid #c9c9c9'});
        }
    });

    // Edited by Tushar Sharma
// 10th june 2021


$("#check").click(function() {
    if (this.checked) {
        $("#signUpBtn").removeAttr("disabled")
        $("#signUpBtn").css("background", "#615dc6")
        $("#signUpBtn").css("border", "1px solid #615dc6")
    }
    if (this.checked === false){
        $("#signUpBtn").attr('disabled', "true")
        $("#signUpBtn").css("background", "#b7b5b5")
        $("#signUpBtn").css("border", "1px solid #b7b5b5")

    }
});



$("#rUL-label-link").click(
    ()=>{
        var newurl = window.location.protocol + "//" + window.location.host + '/index.html#price';
        $("a").attr("href", newurl )
    }
)


});




// when animating on canvas, it is best to use requestAnimationFrame instead of setTimeout or setInterval
// not supported in all browsers though and sometimes needs a prefix, so we need a shim
window.requestAnimFrame = ( function() {
	return window.requestAnimationFrame ||
				window.webkitRequestAnimationFrame ||
				window.mozRequestAnimationFrame ||
				function( callback ) {
					window.setTimeout( callback, 1000 / 60 );
				};
})();



// now we will setup our basic variables for the demo
var canvas = document.getElementById( 'canvas' ),
		ctx = canvas.getContext( '2d' ),
		// full screen dimensions
		cw = window.innerWidth,
		ch = window.innerHeight,
		// firework collection
		fireworks = [],
		// particle collection
		particles = [],
		// starting hue
		hue = 120,
		// when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks
		limiterTotal = 0,
		limiterTick = 0,
		// this will time the auto launches of fireworks, one launch per 80 loop ticks
		timerTotal = 2,
		timerTick = 0,
		mousedown = false,
		// mouse x coordinate,
		mx,
		// mouse y coordinate
		my;
		
// set canvas dimensions
canvas.width = cw;
canvas.height = ch;

// now we are going to setup our function placeholders for the entire demo

// get a random number within a range
function random( min, max ) {
	return Math.random() * ( max - min ) + min;
}

// calculate the distance between two points
function calculateDistance( p1x, p1y, p2x, p2y ) {
	var xDistance = p1x - p2x,
			yDistance = p1y - p2y;
	return Math.sqrt( Math.pow( xDistance, 2 ) + Math.pow( yDistance, 2 ) );
}

// create firework
function Firework( sx, sy, tx, ty ) {
	// actual coordinates
	this.x = sx;
	this.y = sy;
	// starting coordinates
	this.sx = sx;
	this.sy = sy;
	// target coordinates
	this.tx = tx;
	this.ty = ty;
	// distance from starting point to target
	this.distanceToTarget = calculateDistance( sx, sy, tx, ty );
	this.distanceTraveled = 0;
	// track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails
	this.coordinates = [];
	this.coordinateCount = 3;
	// populate initial coordinate collection with the current coordinates
	while( this.coordinateCount-- ) {
		this.coordinates.push( [ this.x, this.y ] );
	}
	this.angle = Math.atan2( ty - sy, tx - sx );
	this.speed = 2;
	this.acceleration = 1.05;
	this.brightness = random( 100, 110 );
	// circle target indicator radius
	this.targetRadius = 1;
}

// update firework
Firework.prototype.update = function( index ) {
	// remove last item in coordinates array
	this.coordinates.pop();
	// add current coordinates to the start of the array
	this.coordinates.unshift( [ this.x, this.y ] );
	
	// cycle the circle target indicator radius
	if( this.targetRadius < 8 ) {
		this.targetRadius += 0.3;
	} else {
		this.targetRadius = 1;
	}
	
	// speed up the firework
	this.speed *= this.acceleration;
	
	// get the current velocities based on angle and speed
	var vx = Math.cos( this.angle ) * this.speed,
			vy = Math.sin( this.angle ) * this.speed;
	// how far will the firework have traveled with velocities applied?
	this.distanceTraveled = calculateDistance( this.sx, this.sy, this.x + vx, this.y + vy );
	
	// if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached
	if( this.distanceTraveled >= this.distanceToTarget ) {
		createParticles( this.tx, this.ty );
		// remove the firework, use the index passed into the update function to determine which to remove
		fireworks.splice( index, 1 );
	} else {
		// target not reached, keep traveling
		this.x += vx;
		this.y += vy;
	}
}

// draw firework
Firework.prototype.draw = function() {
	ctx.beginPath();
	// move to the last tracked coordinate in the set, then draw a line to the current x and y
	ctx.moveTo( this.coordinates[ this.coordinates.length - 1][ 0 ], this.coordinates[ this.coordinates.length - 1][ 1 ] );
	ctx.lineTo( this.x, this.y );
	ctx.strokeStyle = 'hsl(' + hue + ', 100%, ' + this.brightness + '%)';
	ctx.stroke();
	
	ctx.beginPath();
	// draw the target for this firework with a pulsing circle
	ctx.arc( this.tx, this.ty, this.targetRadius, 0, Math.PI * 2 );
	ctx.stroke();
}

// create particle
function Particle( x, y ) {
	this.x = x;
	this.y = y;
	// track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails
	this.coordinates = [];
	this.coordinateCount = 5;
	while( this.coordinateCount-- ) {
		this.coordinates.push( [ this.x, this.y ] );
	}
	// set a random angle in all possible directions, in radians
	this.angle = random( 0, Math.PI * 2 );
	this.speed = random( 1, 10 );
	// friction will slow the particle down
	this.friction = 0.95;
	// gravity will be applied and pull the particle down
	this.gravity = 1;
	// set the hue to a random number +-50 of the overall hue variable
	this.hue = random( hue - 50, hue + 50 );
	this.brightness = random( 50, 80 );
	this.alpha = 1;
	// set how fast the particle fades out
	this.decay = random( 0.015, 0.03 );
}

// update particle
Particle.prototype.update = function( index ) {
	// remove last item in coordinates array
	this.coordinates.pop();
	// add current coordinates to the start of the array
	this.coordinates.unshift( [ this.x, this.y ] );
	// slow down the particle
	this.speed *= this.friction;
	// apply velocity
	this.x += Math.cos( this.angle ) * this.speed;
	this.y += Math.sin( this.angle ) * this.speed + this.gravity;
	// fade out the particle
	this.alpha -= this.decay;
	
	// remove the particle once the alpha is low enough, based on the passed in index
	if( this.alpha <= this.decay ) {
		particles.splice( index, 1 );
	}
}

// draw particle
Particle.prototype.draw = function() {
	ctx. beginPath();
	// move to the last tracked coordinates in the set, then draw a line to the current x and y
	ctx.moveTo( this.coordinates[ this.coordinates.length - 1 ][ 0 ], this.coordinates[ this.coordinates.length - 1 ][ 1 ] );
	ctx.lineTo( this.x, this.y );
	ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';
	ctx.stroke();
}

// create particle group/explosion
function createParticles( x, y ) {
	// increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though
	var particleCount = 30;
	while( particleCount-- ) {
		particles.push( new Particle( x, y ) );
	}
}

// main demo loop
function loop() {
	// this function will run endlessly with requestAnimationFrame
	requestAnimFrame( loop );
	
	// increase the hue to get different colored fireworks over time
	//hue += 0.5;
  
  // create random color
  hue= random(0, 360 );
	
	// normally, clearRect() would be used to clear the canvas
	// we want to create a trailing effect though
	// setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely
	ctx.globalCompositeOperation = 'destination-out';
	// decrease the alpha property to create more prominent trails
	ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
	ctx.fillRect( 0, 0, cw, ch );
	// change the composite operation back to our main mode
	// lighter creates bright highlight points as the fireworks and particles overlap each other
	ctx.globalCompositeOperation = 'lighter';
	
	// loop over each firework, draw it, update it
	var i = fireworks.length;
	while( i-- ) {
		fireworks[ i ].draw();
		fireworks[ i ].update( i );
	}
	
	// loop over each particle, draw it, update it
	var i = particles.length;
	while( i-- ) {
		particles[ i ].draw();
		particles[ i ].update( i );
	}
	
	// launch fireworks automatically to random coordinates, when the mouse isn't down
	if( timerTick >= timerTotal ) {
		if( !mousedown ) {
			// start the firework at the bottom middle of the screen, then set the random target coordinates, the random y coordinates will be set within the range of the top half of the screen
			fireworks.push( new Firework( cw / 2, ch, random( 0, cw ), random( 0, ch / 2 ) ) );
			timerTick = 0;
		}
	} else {
		timerTick++;
	}
	
	// limit the rate at which fireworks get launched when mouse is down
	if( limiterTick >= limiterTotal ) {
		if( mousedown ) {
			// start the firework at the bottom middle of the screen, then set the current mouse coordinates as the target
			fireworks.push( new Firework( cw / 2, ch, mx, my ) );
			limiterTick = 0;
		}
	} else {
		limiterTick++;
	}
}

// mouse event bindings
// update the mouse coordinates on mousemove
canvas.addEventListener( 'mousemove', function( e ) {
	mx = e.pageX - canvas.offsetLeft;
	my = e.pageY - canvas.offsetTop;
});

// toggle mousedown state and prevent canvas from being selected
canvas.addEventListener( 'mousedown', function( e ) {
	e.preventDefault();
	mousedown = true;
});

canvas.addEventListener( 'mouseup', function( e ) {
	e.preventDefault();
	mousedown = false;
});

// once the window loads, we are ready for some fireworks!
window.onload = loop;



// Edition by Tushar Sharma ends here
